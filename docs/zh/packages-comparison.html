<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Go vs Rust åŒ…å¯¹æ¯” - Giztoy æ–‡æ¡£</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "rust" : "rust";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Giztoy æ–‡æ¡£</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/haivivi/giztoy" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="go-vs-rust-åŒ…å¯¹æ¯”æ–‡æ¡£"><a class="header" href="#go-vs-rust-åŒ…å¯¹æ¯”æ–‡æ¡£">Go vs Rust åŒ…å¯¹æ¯”æ–‡æ¡£</a></h1>
<p>æœ¬æ–‡æ¡£å¯¹æ¯” Go å’Œ Rust ä¸¤è¾¹çš„åŒ…å®ç°ï¼Œåˆ†æåŠŸèƒ½è¦ç‚¹ã€éš¾ç‚¹å’Œå·®å¼‚ã€‚</p>
<h2 id="-æ¦‚è§ˆ"><a class="header" href="#-æ¦‚è§ˆ">ğŸ“Š æ¦‚è§ˆ</a></h2>
<div class="table-wrapper"><table><thead><tr><th>åŒ…å</th><th style="text-align: center">Go</th><th style="text-align: center">Rust</th><th>çŠ¶æ€</th></tr></thead><tbody>
<tr><td>audio</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>Rust ç¼ºå°‘ portaudio</td></tr>
<tr><td>buffer</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>åŸºæœ¬ä¸€è‡´</td></tr>
<tr><td>chatgear</td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td>cli</td><td style="text-align: center">âœ…</td><td style="text-align: center">âš ï¸</td><td>Rust ç¼ºå°‘å¤šæ•°åŠŸèƒ½</td></tr>
<tr><td>dashscope</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>åŸºæœ¬ä¸€è‡´</td></tr>
<tr><td>doubaospeech</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>åŸºæœ¬ä¸€è‡´</td></tr>
<tr><td>encoding</td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td>genx</td><td style="text-align: center">âœ…</td><td style="text-align: center">âš ï¸</td><td>Rust ç¼ºå°‘ agent æ¡†æ¶</td></tr>
<tr><td>jsontime</td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td>minimax</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>åŸºæœ¬ä¸€è‡´</td></tr>
<tr><td>mqtt0</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>åŸºæœ¬ä¸€è‡´</td></tr>
<tr><td>speech</td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td>trie</td><td style="text-align: center">âœ…</td><td style="text-align: center">âš ï¸</td><td>Rust å†…åµŒåœ¨ mqtt0</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="-audio---éŸ³é¢‘å¤„ç†"><a class="header" href="#-audio---éŸ³é¢‘å¤„ç†">ğŸ“¦ audio - éŸ³é¢‘å¤„ç†</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹"><a class="header" href="#åŠŸèƒ½è¦ç‚¹">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>pcm</strong>: PCM éŸ³é¢‘æ ¼å¼å¤„ç†ã€æ··éŸ³ã€é™éŸ³ç”Ÿæˆ</li>
<li><strong>codec</strong>: éŸ³é¢‘ç¼–è§£ç ï¼ˆOggã€Opusã€MP3ã€Lameï¼‰</li>
<li><strong>opusrt</strong>: Opus å®æ—¶ç¼–è§£ç å™¨ï¼Œé’ˆå¯¹ä½å»¶è¿Ÿåœºæ™¯ä¼˜åŒ–</li>
<li><strong>resampler</strong>: é‡‡æ ·ç‡è½¬æ¢ï¼ˆåŸºäº soxr åº“ï¼‰</li>
<li><strong>songs</strong>: å†…ç½®æµ‹è¯•æ—‹å¾‹ï¼ˆç”¨äºéªŒè¯éŸ³é¢‘æ’­æ”¾ï¼‰</li>
<li><strong>portaudio</strong>: å®æ—¶å½•éŸ³/æ’­æ”¾ï¼ˆGo ç‹¬æœ‰ï¼‰</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>C åº“ç»‘å®š</strong>: éœ€è¦ç»‘å®š libopusã€libsoxrã€libmp3lame ç­‰ C åº“</li>
<li><strong>å†…å­˜ç®¡ç†</strong>: éŸ³é¢‘æ•°æ®é€šå¸¸å¾ˆå¤§ï¼Œéœ€è¦é¿å…ä¸å¿…è¦çš„æ‹·è´</li>
<li><strong>å®æ—¶æ€§</strong>: opusrt éœ€è¦ä¿è¯ä½å»¶è¿Ÿï¼Œé¿å…é˜»å¡</li>
<li><strong>æ ¼å¼è½¬æ¢</strong>: ä¸åŒé‡‡æ ·ç‡ã€å£°é“æ•°ã€ä½æ·±çš„è½¬æ¢</li>
</ol>
<h3 id="go-vs-rust-å·®å¼‚"><a class="header" href="#go-vs-rust-å·®å¼‚">Go vs Rust å·®å¼‚</a></h3>
<div class="table-wrapper"><table><thead><tr><th>åŠŸèƒ½</th><th style="text-align: center">Go</th><th style="text-align: center">Rust</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>pcm</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>codec</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>opusrt</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>resampler</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>songs</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td><strong>portaudio</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust ç¼ºå¤±å®æ—¶å½•éŸ³/æ’­æ”¾</td></tr>
</tbody></table>
</div>
<h3 id="rust-å¾…å®ç°"><a class="header" href="#rust-å¾…å®ç°">Rust å¾…å®ç°</a></h3>
<pre><code>rust/audio/src/
  â””â”€â”€ portaudio/     # éœ€è¦ç»‘å®š libportaudio
        â”œâ”€â”€ mod.rs
        â”œâ”€â”€ stream.rs   # è¾“å…¥/è¾“å‡ºæµ
        â””â”€â”€ device.rs   # è®¾å¤‡æšä¸¾
</code></pre>
<hr />
<h2 id="-buffer---çº¿ç¨‹å®‰å…¨-buffer"><a class="header" href="#-buffer---çº¿ç¨‹å®‰å…¨-buffer">ğŸ“¦ buffer - çº¿ç¨‹å®‰å…¨ Buffer</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-1"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-1">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>Buffer</strong>: å¯å¢é•¿çš„åŠ¨æ€ bufferï¼Œæ°¸ä¸é˜»å¡å†™å…¥</li>
<li><strong>BlockBuffer</strong>: å›ºå®šå¤§å°é˜»å¡ bufferï¼Œæä¾›èƒŒå‹æœºåˆ¶</li>
<li><strong>RingBuffer</strong>: å›ºå®šå¤§å°ç¯å½¢ bufferï¼Œæ»¡æ—¶è¦†ç›–æ—§æ•°æ®</li>
<li><strong>bytes</strong>: é¢„å®šä¹‰å¤§å°çš„ä¾¿æ·æ„é€ å‡½æ•°ï¼ˆ1KBã€4KBã€16KB ç­‰ï¼‰</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-1"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-1">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>å¹¶å‘å®‰å…¨</strong>: å¤šç”Ÿäº§è€…/å¤šæ¶ˆè´¹è€…åœºæ™¯ä¸‹çš„æ•°æ®ä¸€è‡´æ€§</li>
<li><strong>é˜»å¡/å”¤é†’</strong>: BlockBuffer éœ€è¦é«˜æ•ˆçš„æ¡ä»¶å˜é‡å®ç°</li>
<li><strong>å…³é—­è¯­ä¹‰</strong>: åŒºåˆ† <code>close_write</code>ï¼ˆå…è®¸è¯»å–å‰©ä½™æ•°æ®ï¼‰å’Œ <code>close_with_error</code>ï¼ˆç«‹å³å…³é—­ï¼‰</li>
<li><strong>æ³›å‹è®¾è®¡</strong>: æ”¯æŒä»»æ„å…ƒç´ ç±»å‹ <code>T</code></li>
</ol>
<h3 id="go-vs-rust-å·®å¼‚-1"><a class="header" href="#go-vs-rust-å·®å¼‚-1">Go vs Rust å·®å¼‚</a></h3>
<p>âœ… <strong>å®ç°åŸºæœ¬ä¸€è‡´</strong></p>
<p>Go ä½¿ç”¨ <code>sync.Mutex</code> + <code>sync.Cond</code>ï¼ŒRust ä½¿ç”¨ <code>Mutex&lt;T&gt;</code> + <code>Condvar</code>ã€‚</p>
<hr />
<h2 id="-chatgear---è®¾å¤‡é€šä¿¡æ¡†æ¶--rust-ç¼ºå¤±"><a class="header" href="#-chatgear---è®¾å¤‡é€šä¿¡æ¡†æ¶--rust-ç¼ºå¤±">ğŸ“¦ chatgear - è®¾å¤‡é€šä¿¡æ¡†æ¶ âš ï¸ Rust ç¼ºå¤±</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-2"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-2">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>GearState</strong>: è®¾å¤‡çŠ¶æ€æœºï¼ˆsleeping â†’ ready â†’ recording â†’ streamingï¼‰</li>
<li><strong>GearStateEvent</strong>: çŠ¶æ€å˜æ›´äº‹ä»¶ï¼Œæ”¯æŒåˆå¹¶å’Œå…‹éš†</li>
<li><strong>Command</strong>: è®¾å¤‡å‘½ä»¤ç³»ç»Ÿ</li>
<li><strong>Port</strong>: ç«¯å£æŠ½è±¡ï¼ˆClientPortã€ServerPortï¼‰</li>
<li><strong>Conn</strong>: è¿æ¥ç®¡ç†</li>
<li><strong>Stats</strong>: ç»Ÿè®¡æ•°æ®æ”¶é›†</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-2"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-2">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>çŠ¶æ€æœºè®¾è®¡</strong>: éœ€è¦å®šä¹‰æ¸…æ™°çš„çŠ¶æ€è½¬æ¢è§„åˆ™</li>
<li><strong>äº‹ä»¶åˆå¹¶</strong>: å¤„ç†ä¹±åºäº‹ä»¶ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§</li>
<li><strong>JSON åºåˆ—åŒ–</strong>: æšä¸¾ç±»å‹éœ€è¦åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²</li>
<li><strong>åŒå‘é€šä¿¡</strong>: ç«¯å£æŠ½è±¡éœ€è¦æ”¯æŒè¯·æ±‚/å“åº”æ¨¡å¼</li>
</ol>
<h3 id="çŠ¶æ€æµè½¬å›¾"><a class="header" href="#çŠ¶æ€æµè½¬å›¾">çŠ¶æ€æµè½¬å›¾</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sleeping  â”‚â”€â”€â”€â”€â–¶â”‚   ready   â”‚â”€â”€â”€â”€â–¶â”‚ recording  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â–²                  â”‚                 â”‚
      â”‚                  â–¼                 â–¼
      â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ resetting â”‚â—€â”€â”€â”€â”€â”‚ streaming  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="rust-å¾…å®ç°-1"><a class="header" href="#rust-å¾…å®ç°-1">Rust å¾…å®ç°</a></h3>
<pre><code>rust/chatgear/
  â”œâ”€â”€ Cargo.toml
  â””â”€â”€ src/
        â”œâ”€â”€ lib.rs
        â”œâ”€â”€ state.rs      # GearState æšä¸¾å’Œäº‹ä»¶
        â”œâ”€â”€ command.rs    # å‘½ä»¤ç±»å‹
        â”œâ”€â”€ port.rs       # ç«¯å£æŠ½è±¡
        â”œâ”€â”€ conn.rs       # è¿æ¥ç®¡ç†
        â””â”€â”€ stats.rs      # ç»Ÿè®¡æ•°æ®
</code></pre>
<hr />
<h2 id="-cli---cli-å·¥å…·åº“"><a class="header" href="#-cli---cli-å·¥å…·åº“">ğŸ“¦ cli - CLI å·¥å…·åº“</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-3"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-3">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>config</strong>: é…ç½®ç®¡ç†ï¼Œæ”¯æŒå¤š contextï¼ˆç±»ä¼¼ kubectlï¼‰</li>
<li><strong>output</strong>: è¾“å‡ºæ ¼å¼åŒ–ï¼ˆJSONã€YAMLã€Tableï¼‰</li>
<li><strong>request</strong>: è¯·æ±‚æ–‡ä»¶åŠ è½½ï¼ˆYAML/JSONï¼‰</li>
<li><strong>paths</strong>: è·¯å¾„å·¥å…·å‡½æ•°</li>
<li><strong>tui</strong>: ç»ˆç«¯ UI ç»„ä»¶</li>
<li><strong>log_writer</strong>: æ—¥å¿—å†™å…¥å™¨</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-3"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-3">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>é…ç½®ç›®å½•</strong>: éœ€è¦å¤„ç† <code>~/.giztoy/&lt;app&gt;/</code> ç›®å½•ç»“æ„</li>
<li><strong>å¤šæ ¼å¼è¾“å‡º</strong>: æ ¹æ®ç”¨æˆ·é€‰æ‹©è¾“å‡ºä¸åŒæ ¼å¼</li>
<li><strong>TUI äº¤äº’</strong>: ç»ˆç«¯é¢œè‰²ã€è¿›åº¦æ¡ç­‰</li>
</ol>
<h3 id="go-vs-rust-å·®å¼‚-2"><a class="header" href="#go-vs-rust-å·®å¼‚-2">Go vs Rust å·®å¼‚</a></h3>
<div class="table-wrapper"><table><thead><tr><th>åŠŸèƒ½</th><th style="text-align: center">Go</th><th style="text-align: center">Rust</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>config</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>output</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td><strong>request</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust ç¼ºå¤±è¯·æ±‚æ–‡ä»¶åŠ è½½</td></tr>
<tr><td><strong>paths</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust ç¼ºå¤±è·¯å¾„å·¥å…·</td></tr>
<tr><td><strong>tui</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust ç¼ºå¤± TUI ç»„ä»¶</td></tr>
<tr><td><strong>log_writer</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust ç¼ºå¤±æ—¥å¿—å†™å…¥å™¨</td></tr>
<tr><td><strong>format</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust ç¼ºå¤±æ ¼å¼åŒ–å·¥å…·</td></tr>
</tbody></table>
</div>
<h3 id="rust-å¾…å®ç°-2"><a class="header" href="#rust-å¾…å®ç°-2">Rust å¾…å®ç°</a></h3>
<pre><code>rust/cli/src/
  â”œâ”€â”€ request.rs    # è¯·æ±‚æ–‡ä»¶åŠ è½½
  â”œâ”€â”€ paths.rs      # è·¯å¾„å·¥å…·
  â”œâ”€â”€ tui.rs        # TUI ç»„ä»¶
  â”œâ”€â”€ log_writer.rs # æ—¥å¿—å†™å…¥å™¨
  â””â”€â”€ format.rs     # æ ¼å¼åŒ–å·¥å…·
</code></pre>
<hr />
<h2 id="-dashscope---é˜¿é‡Œäº‘-dashscope-sdk"><a class="header" href="#-dashscope---é˜¿é‡Œäº‘-dashscope-sdk">ğŸ“¦ dashscope - é˜¿é‡Œäº‘ DashScope SDK</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-4"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-4">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>Client</strong>: HTTP å®¢æˆ·ç«¯ï¼Œæ”¯æŒ API Key å’Œ Workspace è®¤è¯</li>
<li><strong>Realtime</strong>: Qwen-Omni-Realtime WebSocket ä¼šè¯</li>
<li><strong>Event</strong>: äº‹ä»¶ç±»å‹å®šä¹‰å’Œè§£æ</li>
<li><strong>Types</strong>: è¯·æ±‚/å“åº”ç±»å‹</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-4"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-4">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>WebSocket ç®¡ç†</strong>: ä¿æŒé•¿è¿æ¥ã€å¿ƒè·³ã€é‡è¿</li>
<li><strong>äº‹ä»¶è§£æ</strong>: æœåŠ¡ç«¯æ¨é€çš„å¤šç§äº‹ä»¶ç±»å‹</li>
<li><strong>éŸ³é¢‘æµ</strong>: å®æ—¶å‘é€/æ¥æ”¶éŸ³é¢‘æ•°æ®</li>
<li><strong>å¹¶å‘æ§åˆ¶</strong>: åŒæ—¶å‘é€å’Œæ¥æ”¶æ¶ˆæ¯</li>
</ol>
<h3 id="go-vs-rust-å·®å¼‚-3"><a class="header" href="#go-vs-rust-å·®å¼‚-3">Go vs Rust å·®å¼‚</a></h3>
<p>âœ… <strong>å®ç°åŸºæœ¬ä¸€è‡´</strong></p>
<hr />
<h2 id="-doubaospeech---è±†åŒ…è¯­éŸ³-sdk"><a class="header" href="#-doubaospeech---è±†åŒ…è¯­éŸ³-sdk">ğŸ“¦ doubaospeech - è±†åŒ…è¯­éŸ³ SDK</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-5"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-5">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>TTS</strong>: è¯­éŸ³åˆæˆï¼ˆåŒæ­¥ã€æµå¼ã€å¼‚æ­¥ï¼‰</li>
<li><strong>ASR</strong>: è¯­éŸ³è¯†åˆ«ï¼ˆä¸€å¥è¯ã€æµå¼ã€æ–‡ä»¶ï¼‰</li>
<li><strong>Voice Clone</strong>: å£°éŸ³å¤åˆ»</li>
<li><strong>Realtime</strong>: ç«¯åˆ°ç«¯å®æ—¶è¯­éŸ³å¯¹è¯</li>
<li><strong>Meeting</strong>: ä¼šè®®è½¬å†™å’Œçºªè¦</li>
<li><strong>Podcast</strong>: å¤šäººæ’­å®¢åˆæˆ</li>
<li><strong>Translation</strong>: åŒå£°ä¼ è¯‘</li>
<li><strong>Media</strong>: éŸ³è§†é¢‘å­—å¹•æå–</li>
<li><strong>Console</strong>: æ§åˆ¶å° APIï¼ˆAK/SK ç­¾åè®¤è¯ï¼‰</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-5"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-5">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>å¤šç§è®¤è¯</strong>: API Keyã€Bearer Tokenã€AK/SK ç­¾å</li>
<li><strong>æµå¼åè®®</strong>: è‡ªå®šä¹‰äºŒè¿›åˆ¶åè®®ï¼ŒåŒ…å«å¤´éƒ¨æ ‡è¯†</li>
<li><strong>WebSocket ä¼šè¯</strong>: å¤šç§èµ„æºç±»å‹ï¼Œä¸åŒçš„ URL æ¨¡å¼</li>
<li><strong>å¼‚æ­¥ä»»åŠ¡</strong>: æäº¤ä»»åŠ¡ã€è½®è¯¢çŠ¶æ€ã€è·å–ç»“æœ</li>
</ol>
<h3 id="åè®®æ ¼å¼"><a class="header" href="#åè®®æ ¼å¼">åè®®æ ¼å¼</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (4 bytes)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Payload Size (4 bytes)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Payload (variable)                               â”‚
â”‚  - JSON for text responses                       â”‚
â”‚  - Binary for audio data                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="go-vs-rust-å·®å¼‚-4"><a class="header" href="#go-vs-rust-å·®å¼‚-4">Go vs Rust å·®å¼‚</a></h3>
<p>âœ… <strong>å®ç°åŸºæœ¬ä¸€è‡´</strong></p>
<hr />
<h2 id="-encoding---json-ç¼–ç ç±»å‹--rust-ç¼ºå¤±"><a class="header" href="#-encoding---json-ç¼–ç ç±»å‹--rust-ç¼ºå¤±">ğŸ“¦ encoding - JSON ç¼–ç ç±»å‹ âš ï¸ Rust ç¼ºå¤±</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-6"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-6">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>StdBase64Data</strong>: æ ‡å‡† Base64 ç¼–ç çš„å­—èŠ‚åˆ‡ç‰‡</li>
<li><strong>HexData</strong>: åå…­è¿›åˆ¶ç¼–ç çš„å­—èŠ‚åˆ‡ç‰‡</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-6"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-6">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>JSON åºåˆ—åŒ–</strong>: è‡ªå®šä¹‰åºåˆ—åŒ–/ååºåˆ—åŒ–</li>
<li><strong>ç©ºå€¼å¤„ç†</strong>: å¤„ç† <code>null</code> å€¼</li>
</ol>
<h3 id="rust-å¾…å®ç°-3"><a class="header" href="#rust-å¾…å®ç°-3">Rust å¾…å®ç°</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// rust/encoding/src/lib.rs

use serde::{Deserialize, Serialize, Deserializer, Serializer};
use base64::{Engine, engine::general_purpose::STANDARD};

#[derive(Debug, Clone, Default)]
pub struct StdBase64Data(pub Vec&lt;u8&gt;);

impl Serialize for StdBase64Data {
    fn serialize&lt;S: Serializer&gt;(&amp;self, s: S) -&gt; Result&lt;S::Ok, S::Error&gt; {
        s.serialize_str(&amp;STANDARD.encode(&amp;self.0))
    }
}

impl&lt;'de&gt; Deserialize&lt;'de&gt; for StdBase64Data {
    fn deserialize&lt;D: Deserializer&lt;'de&gt;&gt;(d: D) -&gt; Result&lt;Self, D::Error&gt; {
        let s = String::deserialize(d)?;
        let bytes = STANDARD.decode(s).map_err(serde::de::Error::custom)?;
        Ok(StdBase64Data(bytes))
    }
}
<span class="boring">}</span></code></pre></pre>
<hr />
<h2 id="-genx---llm-ç»Ÿä¸€æ¥å£"><a class="header" href="#-genx---llm-ç»Ÿä¸€æ¥å£">ğŸ“¦ genx - LLM ç»Ÿä¸€æ¥å£</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-7"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-7">åŠŸèƒ½è¦ç‚¹</a></h3>
<h4 id="æ ¸å¿ƒ-go--rust"><a class="header" href="#æ ¸å¿ƒ-go--rust">æ ¸å¿ƒ (Go &amp; Rust)</a></h4>
<ul>
<li><strong>Message/Contents</strong>: æ¶ˆæ¯å’Œå†…å®¹ç±»å‹</li>
<li><strong>FuncTool</strong>: å‡½æ•°å·¥å…·ï¼ˆJSON Schemaï¼‰</li>
<li><strong>Stream</strong>: æµå¼å“åº”å¤„ç†</li>
<li><strong>Generator</strong>: LLM ç”Ÿæˆå™¨ trait</li>
<li><strong>ModelContext</strong>: æ¨¡å‹ä¸Šä¸‹æ–‡</li>
</ul>
<h4 id="é«˜çº§åŠŸèƒ½-go-ç‹¬æœ‰"><a class="header" href="#é«˜çº§åŠŸèƒ½-go-ç‹¬æœ‰">é«˜çº§åŠŸèƒ½ (Go ç‹¬æœ‰)</a></h4>
<ul>
<li><strong>agent/</strong>: Agent æ¡†æ¶
<ul>
<li>ReActAgent: æ¨ç†-è¡ŒåŠ¨å¾ªç¯</li>
<li>MatchAgent: æ„å›¾åŒ¹é…è·¯ç”±</li>
<li>Tool ç³»ç»Ÿ: BuiltinToolã€GeneratorToolã€HTTPToolã€CompositeTool</li>
</ul>
</li>
<li><strong>agentcfg/</strong>: Agent é…ç½®ç³»ç»Ÿ
<ul>
<li>YAML/JSON é…ç½®åŠ è½½</li>
<li>$ref å¼•ç”¨ç³»ç»Ÿ</li>
<li>çŠ¶æ€åºåˆ—åŒ–</li>
</ul>
</li>
<li><strong>match/</strong>: è§„åˆ™åŒ¹é…å¼•æ“
<ul>
<li>æ¨¡å¼å®šä¹‰</li>
<li>å˜é‡æå–</li>
</ul>
</li>
<li><strong>generators/</strong>: Generator å®ç°é›†åˆ</li>
<li><strong>modelcontexts/</strong>: ModelContext å®ç°é›†åˆ</li>
<li><strong>playground/</strong>: æµ‹è¯•å’Œè°ƒè¯•å·¥å…·</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-7"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-7">æŠ€æœ¯éš¾ç‚¹</a></h3>
<h4 id="æ ¸å¿ƒ"><a class="header" href="#æ ¸å¿ƒ">æ ¸å¿ƒ</a></h4>
<ol>
<li><strong>JSON Schema ç”Ÿæˆ</strong>: ä»ç±»å‹å®šä¹‰è‡ªåŠ¨ç”Ÿæˆ JSON Schema</li>
<li><strong>æµå¼å¤„ç†</strong>: å¤„ç† SSE æˆ– WebSocket æµ</li>
<li><strong>å¤šæ¨¡æ€</strong>: æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘çš„ç»Ÿä¸€å¤„ç†</li>
</ol>
<h4 id="agent-æ¡†æ¶"><a class="header" href="#agent-æ¡†æ¶">Agent æ¡†æ¶</a></h4>
<ol>
<li><strong>çŠ¶æ€ç®¡ç†</strong>: Agent æ‰§è¡Œè¿‡ç¨‹ä¸­çš„çŠ¶æ€ä¿å­˜å’Œæ¢å¤</li>
<li><strong>å·¥å…·ç¼–æ’</strong>: å¤šå·¥å…·ç»„åˆã€é¡ºåºæ‰§è¡Œã€æ¡ä»¶åˆ†æ”¯</li>
<li><strong>åŒ¹é…å¼•æ“</strong>: è§„åˆ™è§£æã€å˜é‡æå–ã€ä¼˜å…ˆçº§å¤„ç†</li>
<li><strong>é…ç½®ç³»ç»Ÿ</strong>: å¼•ç”¨è§£æã€ç±»å‹éªŒè¯ã€çƒ­é‡è½½</li>
</ol>
<h3 id="go-vs-rust-å·®å¼‚-5"><a class="header" href="#go-vs-rust-å·®å¼‚-5">Go vs Rust å·®å¼‚</a></h3>
<div class="table-wrapper"><table><thead><tr><th>åŠŸèƒ½</th><th style="text-align: center">Go</th><th style="text-align: center">Rust</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>Message/Contents</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>FuncTool</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>Stream</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>Generator</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>OpenAI é€‚é…</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td>Gemini é€‚é…</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>å®ç°ä¸€è‡´</td></tr>
<tr><td><strong>agent/</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td><strong>agentcfg/</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td><strong>match/</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td><strong>generators/</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td><strong>modelcontexts/</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
<tr><td><strong>playground/</strong></td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å®Œå…¨ç¼ºå¤±</td></tr>
</tbody></table>
</div>
<h3 id="agent-æ¶æ„å›¾"><a class="header" href="#agent-æ¶æ„å›¾">Agent æ¶æ„å›¾</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Router Agent (Match)                    â”‚
â”‚                   Rules: chat, fortune, music                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                     â”‚                         â”‚
â”‚             â–¼                     â–¼                         â–¼
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚   Chat Agent    â”‚   â”‚  Fortune Agent  â”‚   â”‚   Music Agent   â”‚
â”‚   â”‚    (ReAct)      â”‚   â”‚    (ReAct)      â”‚   â”‚    (ReAct)      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                  â”‚                     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          â”‚ lunar_cal     â”‚     â”‚ search_song   â”‚
â”‚                          â”‚ calculate     â”‚     â”‚ play_song     â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="rust-å¾…å®ç°-4"><a class="header" href="#rust-å¾…å®ç°-4">Rust å¾…å®ç°</a></h3>
<pre><code>rust/genx/src/
  â”œâ”€â”€ agent/
  â”‚     â”œâ”€â”€ mod.rs
  â”‚     â”œâ”€â”€ react.rs      # ReAct Agent
  â”‚     â”œâ”€â”€ match_agent.rs # Match Agent
  â”‚     â”œâ”€â”€ state.rs      # çŠ¶æ€ç®¡ç†
  â”‚     â””â”€â”€ tools/
  â”‚           â”œâ”€â”€ mod.rs
  â”‚           â”œâ”€â”€ builtin.rs
  â”‚           â”œâ”€â”€ generator.rs
  â”‚           â”œâ”€â”€ http.rs
  â”‚           â””â”€â”€ composite.rs
  â”œâ”€â”€ agentcfg/
  â”‚     â”œâ”€â”€ mod.rs
  â”‚     â”œâ”€â”€ agent.rs      # Agent é…ç½®
  â”‚     â”œâ”€â”€ tool.rs       # Tool é…ç½®
  â”‚     â”œâ”€â”€ context.rs    # Context é…ç½®
  â”‚     â””â”€â”€ refs.rs       # å¼•ç”¨è§£æ
  â””â”€â”€ match/
        â”œâ”€â”€ mod.rs
        â”œâ”€â”€ rule.rs       # è§„åˆ™å®šä¹‰
        â”œâ”€â”€ pattern.rs    # æ¨¡å¼è§£æ
        â””â”€â”€ matcher.rs    # åŒ¹é…å¼•æ“
</code></pre>
<hr />
<h2 id="-jsontime---json-æ—¶é—´ç±»å‹--rust-ç¼ºå¤±"><a class="header" href="#-jsontime---json-æ—¶é—´ç±»å‹--rust-ç¼ºå¤±">ğŸ“¦ jsontime - JSON æ—¶é—´ç±»å‹ âš ï¸ Rust ç¼ºå¤±</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-8"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-8">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>Duration</strong>: æ—¶é—´é—´éš”ï¼Œåºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²æˆ–çº³ç§’æ•°</li>
<li><strong>Milli</strong>: æ¯«ç§’æ—¶é—´æˆ³</li>
<li><strong>Unix</strong>: Unix æ—¶é—´æˆ³ï¼ˆç§’ï¼‰</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-8"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-8">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>çµæ´»ååºåˆ—åŒ–</strong>: æ”¯æŒå­—ç¬¦ä¸² <code>"1h30m"</code> æˆ–æ•°å­— <code>5400000000000</code></li>
<li><strong>ç²¾åº¦å¤„ç†</strong>: æ¯«ç§’/ç§’/çº³ç§’è½¬æ¢</li>
</ol>
<h3 id="rust-å¾…å®ç°-5"><a class="header" href="#rust-å¾…å®ç°-5">Rust å¾…å®ç°</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// rust/jsontime/src/lib.rs

use serde::{Deserialize, Deserializer, Serialize, Serializer};
use std::time::Duration as StdDuration;

#[derive(Debug, Clone, Copy, Default)]
pub struct Duration(pub StdDuration);

impl Serialize for Duration {
    fn serialize&lt;S: Serializer&gt;(&amp;self, s: S) -&gt; Result&lt;S::Ok, S::Error&gt; {
        s.serialize_str(&amp;format_duration(self.0))
    }
}

impl&lt;'de&gt; Deserialize&lt;'de&gt; for Duration {
    fn deserialize&lt;D: Deserializer&lt;'de&gt;&gt;(d: D) -&gt; Result&lt;Self, D::Error&gt; {
        // æ”¯æŒå­—ç¬¦ä¸²æˆ–æ•°å­—
        // ...
    }
}

#[derive(Debug, Clone, Copy, Default, Serialize, Deserialize)]
pub struct Milli(pub i64);

#[derive(Debug, Clone, Copy, Default, Serialize, Deserialize)]  
pub struct Unix(pub i64);
<span class="boring">}</span></code></pre></pre>
<hr />
<h2 id="-minimax---minimax-sdk"><a class="header" href="#-minimax---minimax-sdk">ğŸ“¦ minimax - MiniMax SDK</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-9"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-9">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>Text</strong>: æ–‡æœ¬ç”Ÿæˆï¼ˆChatCompletionï¼‰ã€æµå¼è¾“å‡º</li>
<li><strong>Speech</strong>: è¯­éŸ³åˆæˆï¼ˆåŒæ­¥ã€å¼‚æ­¥ï¼‰</li>
<li><strong>Video</strong>: è§†é¢‘ç”Ÿæˆï¼ˆT2Vã€I2Vã€Agentï¼‰</li>
<li><strong>Image</strong>: å›¾ç‰‡ç”Ÿæˆ</li>
<li><strong>Music</strong>: éŸ³ä¹ç”Ÿæˆ</li>
<li><strong>File</strong>: æ–‡ä»¶ä¸Šä¼ /ç®¡ç†</li>
<li><strong>Voice</strong>: éŸ³è‰²åˆ—è¡¨ã€å…‹éš†ã€è®¾è®¡</li>
<li><strong>Task</strong>: å¼‚æ­¥ä»»åŠ¡è½®è¯¢</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-9"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-9">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>æµå¼è§£æ</strong>: SSE æ ¼å¼è§£æ</li>
<li><strong>å¼‚æ­¥ä»»åŠ¡</strong>: è½®è¯¢æœºåˆ¶ã€è¶…æ—¶å¤„ç†</li>
<li><strong>æ–‡ä»¶ä¸Šä¼ </strong>: multipart/form-data</li>
<li><strong>é”™è¯¯å¤„ç†</strong>: API é”™è¯¯ç æ˜ å°„</li>
</ol>
<h3 id="go-vs-rust-å·®å¼‚-6"><a class="header" href="#go-vs-rust-å·®å¼‚-6">Go vs Rust å·®å¼‚</a></h3>
<p>âœ… <strong>å®ç°åŸºæœ¬ä¸€è‡´</strong></p>
<hr />
<h2 id="-mqtt0---è½»é‡çº§-mqtt"><a class="header" href="#-mqtt0---è½»é‡çº§-mqtt">ğŸ“¦ mqtt0 - è½»é‡çº§ MQTT</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-10"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-10">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>Client</strong>: QoS 0 MQTT å®¢æˆ·ç«¯</li>
<li><strong>Broker</strong>: QoS 0 MQTT æœåŠ¡ç«¯</li>
<li><strong>Authenticator</strong>: è®¤è¯æ¥å£</li>
<li><strong>ACL</strong>: å‘å¸ƒ/è®¢é˜…æƒé™æ§åˆ¶</li>
<li><strong>Transport</strong>: TCPã€TLSã€WebSocketã€WSS</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-10"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-10">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>åè®®è§£æ</strong>: MQTT 3.1.1 / 5.0 æŠ¥æ–‡è§£æ</li>
<li><strong>Topic åŒ¹é…</strong>: é€šé…ç¬¦ <code>+</code> å’Œ <code>#</code> çš„å¤„ç†</li>
<li><strong>è¿æ¥ç®¡ç†</strong>: å®¢æˆ·ç«¯æ–­å¼€ã€é‡è¿ã€å¿ƒè·³</li>
<li><strong>TLS æ”¯æŒ</strong>: è¯ä¹¦åŠ è½½ã€éªŒè¯</li>
</ol>
<h3 id="go-vs-rust-å·®å¼‚-7"><a class="header" href="#go-vs-rust-å·®å¼‚-7">Go vs Rust å·®å¼‚</a></h3>
<p>âœ… <strong>å®ç°åŸºæœ¬ä¸€è‡´</strong></p>
<p>Rust çš„ trie å®ç°å†…åµŒåœ¨ mqtt0 ä¸­ï¼ŒGo çš„ trie æ˜¯ç‹¬ç«‹åŒ…ã€‚</p>
<hr />
<h2 id="-speech---è¯­éŸ³æŠ½è±¡å±‚--rust-ç¼ºå¤±"><a class="header" href="#-speech---è¯­éŸ³æŠ½è±¡å±‚--rust-ç¼ºå¤±">ğŸ“¦ speech - è¯­éŸ³æŠ½è±¡å±‚ âš ï¸ Rust ç¼ºå¤±</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-11"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-11">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>Speech</strong>: è¯­éŸ³æµæ¥å£ï¼ˆéŸ³é¢‘ + æ–‡æœ¬è½¬å†™ï¼‰</li>
<li><strong>SpeechSegment</strong>: å•ä¸ªè¯­éŸ³ç‰‡æ®µ</li>
<li><strong>Voice</strong>: çº¯éŸ³é¢‘æµæ¥å£</li>
<li><strong>VoiceSegment</strong>: å•ä¸ªéŸ³é¢‘ç‰‡æ®µ</li>
<li><strong>TTS/ASR</strong>: æŠ½è±¡æ¥å£</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-11"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-11">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>æŠ½è±¡è®¾è®¡</strong>: ç»Ÿä¸€ä¸åŒ TTS/ASR æä¾›å•†çš„æ¥å£</li>
<li><strong>æµå¼å¤„ç†</strong>: è¾¹ç”Ÿæˆè¾¹æ’­æ”¾</li>
<li><strong>èµ„æºç®¡ç†</strong>: æ­£ç¡®å…³é—­æµå’Œé‡Šæ”¾èµ„æº</li>
</ol>
<h3 id="æ¥å£è®¾è®¡"><a class="header" href="#æ¥å£è®¾è®¡">æ¥å£è®¾è®¡</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Speech                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Segment 1 â”‚â”€â”€â–¶â”‚ Segment 2 â”‚â”€â”€â–¶â”‚ Segment 3 â”‚  â”‚
â”‚  â”‚ Audio +   â”‚   â”‚ Audio +   â”‚   â”‚ Audio +   â”‚  â”‚
â”‚  â”‚ Text      â”‚   â”‚ Text      â”‚   â”‚ Text      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Voice                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Segment 1 â”‚â”€â”€â–¶â”‚ Segment 2 â”‚â”€â”€â–¶â”‚ Segment 3 â”‚  â”‚
â”‚  â”‚ Audio     â”‚   â”‚ Audio     â”‚   â”‚ Audio     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="rust-å¾…å®ç°-6"><a class="header" href="#rust-å¾…å®ç°-6">Rust å¾…å®ç°</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// rust/speech/src/lib.rs

use giztoy_audio::pcm::Format;
use std::io::Read;

pub trait Speech {
    type Segment: SpeechSegment;
    
    fn next(&amp;mut self) -&gt; Result&lt;Option&lt;Self::Segment&gt;, Error&gt;;
    fn close(&amp;mut self) -&gt; Result&lt;(), Error&gt;;
}

pub trait SpeechSegment {
    fn decode(&amp;self, format: Format) -&gt; VoiceSegment;
    fn transcribe(&amp;self) -&gt; Box&lt;dyn Read&gt;;
    fn close(&amp;mut self) -&gt; Result&lt;(), Error&gt;;
}

pub trait Voice {
    type Segment: VoiceSegment;
    
    fn next(&amp;mut self) -&gt; Result&lt;Option&lt;Self::Segment&gt;, Error&gt;;
    fn close(&amp;mut self) -&gt; Result&lt;(), Error&gt;;
}

pub trait VoiceSegment {
    fn format(&amp;self) -&gt; Format;
    fn samples(&amp;self) -&gt; &amp;[i16];
}
<span class="boring">}</span></code></pre></pre>
<hr />
<h2 id="-trie---æ³›å‹-trie-æ•°æ®ç»“æ„"><a class="header" href="#-trie---æ³›å‹-trie-æ•°æ®ç»“æ„">ğŸ“¦ trie - æ³›å‹ Trie æ•°æ®ç»“æ„</a></h2>
<h3 id="åŠŸèƒ½è¦ç‚¹-12"><a class="header" href="#åŠŸèƒ½è¦ç‚¹-12">åŠŸèƒ½è¦ç‚¹</a></h3>
<ul>
<li><strong>è·¯å¾„å­˜å‚¨</strong>: åŸºäº <code>/</code> åˆ†éš”çš„è·¯å¾„</li>
<li><strong>é€šé…ç¬¦åŒ¹é…</strong>: <code>+</code>ï¼ˆå•çº§ï¼‰å’Œ <code>#</code>ï¼ˆå¤šçº§ï¼‰</li>
<li><strong>æ³›å‹å€¼</strong>: æ”¯æŒä»»æ„ç±»å‹ <code>T</code></li>
<li><strong>éå†</strong>: Walk æ–¹æ³•éå†æ‰€æœ‰èŠ‚ç‚¹</li>
</ul>
<h3 id="æŠ€æœ¯éš¾ç‚¹-12"><a class="header" href="#æŠ€æœ¯éš¾ç‚¹-12">æŠ€æœ¯éš¾ç‚¹</a></h3>
<ol>
<li><strong>åŒ¹é…ä¼˜å…ˆçº§</strong>: ç²¾ç¡®åŒ¹é… &gt; å•çº§é€šé…ç¬¦ &gt; å¤šçº§é€šé…ç¬¦</li>
<li><strong>è·¯å¾„è§£æ</strong>: å¤„ç†ç©ºæ®µã€å°¾éƒ¨æ–œæ </li>
<li><strong>æ³›å‹è®¾è®¡</strong>: æ”¯æŒä»»æ„å…ƒç´ ç±»å‹</li>
</ol>
<h3 id="go-vs-rust-å·®å¼‚-8"><a class="header" href="#go-vs-rust-å·®å¼‚-8">Go vs Rust å·®å¼‚</a></h3>
<div class="table-wrapper"><table><thead><tr><th>åŠŸèƒ½</th><th style="text-align: center">Go</th><th style="text-align: center">Rust</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>ç‹¬ç«‹åŒ…</td><td style="text-align: center">âœ…</td><td style="text-align: center">âŒ</td><td>Rust å†…åµŒåœ¨ mqtt0</td></tr>
<tr><td>æ³›å‹æ”¯æŒ</td><td style="text-align: center">âœ…</td><td style="text-align: center">âœ…</td><td>éƒ½æ”¯æŒæ³›å‹</td></tr>
</tbody></table>
</div>
<h3 id="rust-å¾…å®ç°ç‹¬ç«‹åŒ…"><a class="header" href="#rust-å¾…å®ç°ç‹¬ç«‹åŒ…">Rust å¾…å®ç°ï¼ˆç‹¬ç«‹åŒ…ï¼‰</a></h3>
<pre><code>rust/trie/
  â”œâ”€â”€ Cargo.toml
  â””â”€â”€ src/
        â””â”€â”€ lib.rs    # ä» mqtt0/src/trie.rs æå–
</code></pre>
<hr />
<h2 id="-ä¼˜å…ˆçº§å»ºè®®"><a class="header" href="#-ä¼˜å…ˆçº§å»ºè®®">ğŸ¯ ä¼˜å…ˆçº§å»ºè®®</a></h2>
<h3 id="p0---æ ¸å¿ƒåŠŸèƒ½"><a class="header" href="#p0---æ ¸å¿ƒåŠŸèƒ½">P0 - æ ¸å¿ƒåŠŸèƒ½</a></h3>
<ol>
<li><strong>genx/agent/</strong> - Agent æ¡†æ¶æ˜¯æ™ºèƒ½åº”ç”¨çš„æ ¸å¿ƒ</li>
<li><strong>chatgear/</strong> - è®¾å¤‡é€šä¿¡æ˜¯ IoT åœºæ™¯å¿…éœ€</li>
</ol>
<h3 id="p1---é‡è¦åŠŸèƒ½"><a class="header" href="#p1---é‡è¦åŠŸèƒ½">P1 - é‡è¦åŠŸèƒ½</a></h3>
<ol start="3">
<li><strong>speech/</strong> - è¯­éŸ³æŠ½è±¡å±‚æä¾›ç»Ÿä¸€æ¥å£</li>
<li><strong>genx/match/</strong> - è§„åˆ™åŒ¹é…æ”¯æŒæ„å›¾è¯†åˆ«</li>
<li><strong>cli/</strong> è¡¥å…¨ - TUIã€æ—¥å¿—ç­‰ç”¨æˆ·ä½“éªŒåŠŸèƒ½</li>
</ol>
<h3 id="p2---å·¥å…·ç±»"><a class="header" href="#p2---å·¥å…·ç±»">P2 - å·¥å…·ç±»</a></h3>
<ol start="6">
<li><strong>jsontime/</strong> - JSON åºåˆ—åŒ–ä¾¿æ·ç±»å‹</li>
<li><strong>encoding/</strong> - ç¼–ç å·¥å…·ç±»å‹</li>
<li><strong>trie/</strong> - ç‹¬ç«‹åŒ…ï¼Œä¾¿äºå¤ç”¨</li>
<li><strong>audio/portaudio</strong> - å®æ—¶éŸ³é¢‘é‡‡é›†</li>
</ol>
<hr />
<h2 id="-æ€»ç»“"><a class="header" href="#-æ€»ç»“">ğŸ“ æ€»ç»“</a></h2>
<p><strong>æ›´æ–° (2026-01-23)</strong>: Rust å®ç°å·²å¤§å¹…è¡¥å…¨ï¼Œç°å·²è¦†ç›–ï¼š</p>
<h3 id="-å·²å®Œæˆè¿ç§»"><a class="header" href="#-å·²å®Œæˆè¿ç§»">âœ… å·²å®Œæˆè¿ç§»</a></h3>
<ol>
<li><strong>API å®¢æˆ·ç«¯</strong>: minimaxã€dashscopeã€doubaospeech - å®Œæ•´å®ç°</li>
<li><strong>åŸºç¡€è®¾æ–½</strong>: bufferã€audio codecã€mqtt0 - å®Œæ•´å®ç°</li>
<li><strong>è®¾å¤‡é€šä¿¡</strong>: chatgear - å®Œæ•´å®ç°ï¼ˆstate, command, stats, port traits, pipe for testingï¼‰</li>
<li><strong>é«˜å±‚æŠ½è±¡</strong>: speech - å®Œæ•´å®ç°ï¼ˆTTS/ASR interfaces, Mux, SentenceSegmenterï¼‰</li>
<li><strong>å·¥å…·ç±»</strong>: jsontime, encoding, trie, cli - å®Œæ•´å®ç°</li>
</ol>
<h3 id="-å¾…å®Œæˆ"><a class="header" href="#-å¾…å®Œæˆ">â³ å¾…å®Œæˆ</a></h3>
<ol>
<li><strong>Agent æ¡†æ¶ (genx/agent)</strong>: è¿™æ˜¯ä¸»è¦å·®è·ï¼ŒGo ç‰ˆæœ¬æœ‰å®Œæ•´çš„ Agent ç³»ç»Ÿæ”¯æŒ ReAct å’Œ Match æ¨¡å¼</li>
<li><strong>audio/portaudio</strong>: å®æ—¶éŸ³é¢‘é‡‡é›†ï¼ˆéœ€è¦ C ç»‘å®šï¼‰</li>
</ol>
<h3 id="-æµ‹è¯•è¦†ç›–"><a class="header" href="#-æµ‹è¯•è¦†ç›–">ğŸ“Š æµ‹è¯•è¦†ç›–</a></h3>
<p>æ‰€æœ‰ Rust åŒ…éƒ½æœ‰å®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼Œé€šè¿‡ <code>bazel test //rust/...</code> éªŒè¯ã€‚</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="esp/esp-rs-migration.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="examples/doc.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="esp/esp-rs-migration.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="examples/doc.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="mermaid.min.js"></script>
        <script src="mermaid-init.js"></script>


    </div>
    </body>
</html>
