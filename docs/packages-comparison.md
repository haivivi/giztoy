# Go vs Rust åŒ…å¯¹æ¯”æ–‡æ¡£

æœ¬æ–‡æ¡£å¯¹æ¯” Go å’Œ Rust ä¸¤è¾¹çš„åŒ…å®ç°ï¼Œåˆ†æåŠŸèƒ½è¦ç‚¹ã€éš¾ç‚¹å’Œå·®å¼‚ã€‚

## ğŸ“Š æ¦‚è§ˆ

| åŒ…å | Go | Rust | çŠ¶æ€ |
|------|:--:|:----:|------|
| audio | âœ… | âœ… | Rust ç¼ºå°‘ portaudio |
| buffer | âœ… | âœ… | åŸºæœ¬ä¸€è‡´ |
| chatgear | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| cli | âœ… | âš ï¸ | Rust ç¼ºå°‘å¤šæ•°åŠŸèƒ½ |
| dashscope | âœ… | âœ… | åŸºæœ¬ä¸€è‡´ |
| doubaospeech | âœ… | âœ… | åŸºæœ¬ä¸€è‡´ |
| encoding | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| genx | âœ… | âš ï¸ | Rust ç¼ºå°‘ agent æ¡†æ¶ |
| jsontime | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| minimax | âœ… | âœ… | åŸºæœ¬ä¸€è‡´ |
| mqtt0 | âœ… | âœ… | åŸºæœ¬ä¸€è‡´ |
| speech | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| trie | âœ… | âš ï¸ | Rust å†…åµŒåœ¨ mqtt0 |

---

## ğŸ“¦ audio - éŸ³é¢‘å¤„ç†

### åŠŸèƒ½è¦ç‚¹
- **pcm**: PCM éŸ³é¢‘æ ¼å¼å¤„ç†ã€æ··éŸ³ã€é™éŸ³ç”Ÿæˆ
- **codec**: éŸ³é¢‘ç¼–è§£ç ï¼ˆOggã€Opusã€MP3ã€Lameï¼‰
- **opusrt**: Opus å®æ—¶ç¼–è§£ç å™¨ï¼Œé’ˆå¯¹ä½å»¶è¿Ÿåœºæ™¯ä¼˜åŒ–
- **resampler**: é‡‡æ ·ç‡è½¬æ¢ï¼ˆåŸºäº soxr åº“ï¼‰
- **songs**: å†…ç½®æµ‹è¯•æ—‹å¾‹ï¼ˆç”¨äºéªŒè¯éŸ³é¢‘æ’­æ”¾ï¼‰
- **portaudio**: å®æ—¶å½•éŸ³/æ’­æ”¾ï¼ˆGo ç‹¬æœ‰ï¼‰

### æŠ€æœ¯éš¾ç‚¹
1. **C åº“ç»‘å®š**: éœ€è¦ç»‘å®š libopusã€libsoxrã€libmp3lame ç­‰ C åº“
2. **å†…å­˜ç®¡ç†**: éŸ³é¢‘æ•°æ®é€šå¸¸å¾ˆå¤§ï¼Œéœ€è¦é¿å…ä¸å¿…è¦çš„æ‹·è´
3. **å®æ—¶æ€§**: opusrt éœ€è¦ä¿è¯ä½å»¶è¿Ÿï¼Œé¿å…é˜»å¡
4. **æ ¼å¼è½¬æ¢**: ä¸åŒé‡‡æ ·ç‡ã€å£°é“æ•°ã€ä½æ·±çš„è½¬æ¢

### Go vs Rust å·®å¼‚
| åŠŸèƒ½ | Go | Rust | è¯´æ˜ |
|------|:--:|:----:|------|
| pcm | âœ… | âœ… | å®ç°ä¸€è‡´ |
| codec | âœ… | âœ… | å®ç°ä¸€è‡´ |
| opusrt | âœ… | âœ… | å®ç°ä¸€è‡´ |
| resampler | âœ… | âœ… | å®ç°ä¸€è‡´ |
| songs | âœ… | âœ… | å®ç°ä¸€è‡´ |
| **portaudio** | âœ… | âŒ | Rust ç¼ºå¤±å®æ—¶å½•éŸ³/æ’­æ”¾ |

### Rust å¾…å®ç°
```
rust/audio/src/
  â””â”€â”€ portaudio/     # éœ€è¦ç»‘å®š libportaudio
        â”œâ”€â”€ mod.rs
        â”œâ”€â”€ stream.rs   # è¾“å…¥/è¾“å‡ºæµ
        â””â”€â”€ device.rs   # è®¾å¤‡æšä¸¾
```

---

## ğŸ“¦ buffer - çº¿ç¨‹å®‰å…¨ Buffer

### åŠŸèƒ½è¦ç‚¹
- **Buffer**: å¯å¢é•¿çš„åŠ¨æ€ bufferï¼Œæ°¸ä¸é˜»å¡å†™å…¥
- **BlockBuffer**: å›ºå®šå¤§å°é˜»å¡ bufferï¼Œæä¾›èƒŒå‹æœºåˆ¶
- **RingBuffer**: å›ºå®šå¤§å°ç¯å½¢ bufferï¼Œæ»¡æ—¶è¦†ç›–æ—§æ•°æ®
- **bytes**: é¢„å®šä¹‰å¤§å°çš„ä¾¿æ·æ„é€ å‡½æ•°ï¼ˆ1KBã€4KBã€16KB ç­‰ï¼‰

### æŠ€æœ¯éš¾ç‚¹
1. **å¹¶å‘å®‰å…¨**: å¤šç”Ÿäº§è€…/å¤šæ¶ˆè´¹è€…åœºæ™¯ä¸‹çš„æ•°æ®ä¸€è‡´æ€§
2. **é˜»å¡/å”¤é†’**: BlockBuffer éœ€è¦é«˜æ•ˆçš„æ¡ä»¶å˜é‡å®ç°
3. **å…³é—­è¯­ä¹‰**: åŒºåˆ† `close_write`ï¼ˆå…è®¸è¯»å–å‰©ä½™æ•°æ®ï¼‰å’Œ `close_with_error`ï¼ˆç«‹å³å…³é—­ï¼‰
4. **æ³›å‹è®¾è®¡**: æ”¯æŒä»»æ„å…ƒç´ ç±»å‹ `T`

### Go vs Rust å·®å¼‚
âœ… **å®ç°åŸºæœ¬ä¸€è‡´**

Go ä½¿ç”¨ `sync.Mutex` + `sync.Cond`ï¼ŒRust ä½¿ç”¨ `Mutex<T>` + `Condvar`ã€‚

---

## ğŸ“¦ chatgear - è®¾å¤‡é€šä¿¡æ¡†æ¶ âš ï¸ Rust ç¼ºå¤±

### åŠŸèƒ½è¦ç‚¹
- **GearState**: è®¾å¤‡çŠ¶æ€æœºï¼ˆsleeping â†’ ready â†’ recording â†’ streamingï¼‰
- **GearStateEvent**: çŠ¶æ€å˜æ›´äº‹ä»¶ï¼Œæ”¯æŒåˆå¹¶å’Œå…‹éš†
- **Command**: è®¾å¤‡å‘½ä»¤ç³»ç»Ÿ
- **Port**: ç«¯å£æŠ½è±¡ï¼ˆClientPortã€ServerPortï¼‰
- **Conn**: è¿æ¥ç®¡ç†
- **Stats**: ç»Ÿè®¡æ•°æ®æ”¶é›†

### æŠ€æœ¯éš¾ç‚¹
1. **çŠ¶æ€æœºè®¾è®¡**: éœ€è¦å®šä¹‰æ¸…æ™°çš„çŠ¶æ€è½¬æ¢è§„åˆ™
2. **äº‹ä»¶åˆå¹¶**: å¤„ç†ä¹±åºäº‹ä»¶ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§
3. **JSON åºåˆ—åŒ–**: æšä¸¾ç±»å‹éœ€è¦åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
4. **åŒå‘é€šä¿¡**: ç«¯å£æŠ½è±¡éœ€è¦æ”¯æŒè¯·æ±‚/å“åº”æ¨¡å¼

### çŠ¶æ€æµè½¬å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sleeping  â”‚â”€â”€â”€â”€â–¶â”‚   ready   â”‚â”€â”€â”€â”€â–¶â”‚ recording  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â–²                  â”‚                 â”‚
      â”‚                  â–¼                 â–¼
      â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ resetting â”‚â—€â”€â”€â”€â”€â”‚ streaming  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Rust å¾…å®ç°
```
rust/chatgear/
  â”œâ”€â”€ Cargo.toml
  â””â”€â”€ src/
        â”œâ”€â”€ lib.rs
        â”œâ”€â”€ state.rs      # GearState æšä¸¾å’Œäº‹ä»¶
        â”œâ”€â”€ command.rs    # å‘½ä»¤ç±»å‹
        â”œâ”€â”€ port.rs       # ç«¯å£æŠ½è±¡
        â”œâ”€â”€ conn.rs       # è¿æ¥ç®¡ç†
        â””â”€â”€ stats.rs      # ç»Ÿè®¡æ•°æ®
```

---

## ğŸ“¦ cli - CLI å·¥å…·åº“

### åŠŸèƒ½è¦ç‚¹
- **config**: é…ç½®ç®¡ç†ï¼Œæ”¯æŒå¤š contextï¼ˆç±»ä¼¼ kubectlï¼‰
- **output**: è¾“å‡ºæ ¼å¼åŒ–ï¼ˆJSONã€YAMLã€Tableï¼‰
- **request**: è¯·æ±‚æ–‡ä»¶åŠ è½½ï¼ˆYAML/JSONï¼‰
- **paths**: è·¯å¾„å·¥å…·å‡½æ•°
- **tui**: ç»ˆç«¯ UI ç»„ä»¶
- **log_writer**: æ—¥å¿—å†™å…¥å™¨

### æŠ€æœ¯éš¾ç‚¹
1. **é…ç½®ç›®å½•**: éœ€è¦å¤„ç† `~/.giztoy/<app>/` ç›®å½•ç»“æ„
2. **å¤šæ ¼å¼è¾“å‡º**: æ ¹æ®ç”¨æˆ·é€‰æ‹©è¾“å‡ºä¸åŒæ ¼å¼
3. **TUI äº¤äº’**: ç»ˆç«¯é¢œè‰²ã€è¿›åº¦æ¡ç­‰

### Go vs Rust å·®å¼‚
| åŠŸèƒ½ | Go | Rust | è¯´æ˜ |
|------|:--:|:----:|------|
| config | âœ… | âœ… | å®ç°ä¸€è‡´ |
| output | âœ… | âœ… | å®ç°ä¸€è‡´ |
| **request** | âœ… | âŒ | Rust ç¼ºå¤±è¯·æ±‚æ–‡ä»¶åŠ è½½ |
| **paths** | âœ… | âŒ | Rust ç¼ºå¤±è·¯å¾„å·¥å…· |
| **tui** | âœ… | âŒ | Rust ç¼ºå¤± TUI ç»„ä»¶ |
| **log_writer** | âœ… | âŒ | Rust ç¼ºå¤±æ—¥å¿—å†™å…¥å™¨ |
| **format** | âœ… | âŒ | Rust ç¼ºå¤±æ ¼å¼åŒ–å·¥å…· |

### Rust å¾…å®ç°
```
rust/cli/src/
  â”œâ”€â”€ request.rs    # è¯·æ±‚æ–‡ä»¶åŠ è½½
  â”œâ”€â”€ paths.rs      # è·¯å¾„å·¥å…·
  â”œâ”€â”€ tui.rs        # TUI ç»„ä»¶
  â”œâ”€â”€ log_writer.rs # æ—¥å¿—å†™å…¥å™¨
  â””â”€â”€ format.rs     # æ ¼å¼åŒ–å·¥å…·
```

---

## ğŸ“¦ dashscope - é˜¿é‡Œäº‘ DashScope SDK

### åŠŸèƒ½è¦ç‚¹
- **Client**: HTTP å®¢æˆ·ç«¯ï¼Œæ”¯æŒ API Key å’Œ Workspace è®¤è¯
- **Realtime**: Qwen-Omni-Realtime WebSocket ä¼šè¯
- **Event**: äº‹ä»¶ç±»å‹å®šä¹‰å’Œè§£æ
- **Types**: è¯·æ±‚/å“åº”ç±»å‹

### æŠ€æœ¯éš¾ç‚¹
1. **WebSocket ç®¡ç†**: ä¿æŒé•¿è¿æ¥ã€å¿ƒè·³ã€é‡è¿
2. **äº‹ä»¶è§£æ**: æœåŠ¡ç«¯æ¨é€çš„å¤šç§äº‹ä»¶ç±»å‹
3. **éŸ³é¢‘æµ**: å®æ—¶å‘é€/æ¥æ”¶éŸ³é¢‘æ•°æ®
4. **å¹¶å‘æ§åˆ¶**: åŒæ—¶å‘é€å’Œæ¥æ”¶æ¶ˆæ¯

### Go vs Rust å·®å¼‚
âœ… **å®ç°åŸºæœ¬ä¸€è‡´**

---

## ğŸ“¦ doubaospeech - è±†åŒ…è¯­éŸ³ SDK

### åŠŸèƒ½è¦ç‚¹
- **TTS**: è¯­éŸ³åˆæˆï¼ˆåŒæ­¥ã€æµå¼ã€å¼‚æ­¥ï¼‰
- **ASR**: è¯­éŸ³è¯†åˆ«ï¼ˆä¸€å¥è¯ã€æµå¼ã€æ–‡ä»¶ï¼‰
- **Voice Clone**: å£°éŸ³å¤åˆ»
- **Realtime**: ç«¯åˆ°ç«¯å®æ—¶è¯­éŸ³å¯¹è¯
- **Meeting**: ä¼šè®®è½¬å†™å’Œçºªè¦
- **Podcast**: å¤šäººæ’­å®¢åˆæˆ
- **Translation**: åŒå£°ä¼ è¯‘
- **Media**: éŸ³è§†é¢‘å­—å¹•æå–
- **Console**: æ§åˆ¶å° APIï¼ˆAK/SK ç­¾åè®¤è¯ï¼‰

### æŠ€æœ¯éš¾ç‚¹
1. **å¤šç§è®¤è¯**: API Keyã€Bearer Tokenã€AK/SK ç­¾å
2. **æµå¼åè®®**: è‡ªå®šä¹‰äºŒè¿›åˆ¶åè®®ï¼ŒåŒ…å«å¤´éƒ¨æ ‡è¯†
3. **WebSocket ä¼šè¯**: å¤šç§èµ„æºç±»å‹ï¼Œä¸åŒçš„ URL æ¨¡å¼
4. **å¼‚æ­¥ä»»åŠ¡**: æäº¤ä»»åŠ¡ã€è½®è¯¢çŠ¶æ€ã€è·å–ç»“æœ

### åè®®æ ¼å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (4 bytes)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Payload Size (4 bytes)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Payload (variable)                               â”‚
â”‚  - JSON for text responses                       â”‚
â”‚  - Binary for audio data                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Go vs Rust å·®å¼‚
âœ… **å®ç°åŸºæœ¬ä¸€è‡´**

---

## ğŸ“¦ encoding - JSON ç¼–ç ç±»å‹ âš ï¸ Rust ç¼ºå¤±

### åŠŸèƒ½è¦ç‚¹
- **StdBase64Data**: æ ‡å‡† Base64 ç¼–ç çš„å­—èŠ‚åˆ‡ç‰‡
- **HexData**: åå…­è¿›åˆ¶ç¼–ç çš„å­—èŠ‚åˆ‡ç‰‡

### æŠ€æœ¯éš¾ç‚¹
1. **JSON åºåˆ—åŒ–**: è‡ªå®šä¹‰åºåˆ—åŒ–/ååºåˆ—åŒ–
2. **ç©ºå€¼å¤„ç†**: å¤„ç† `null` å€¼

### Rust å¾…å®ç°
```rust
// rust/encoding/src/lib.rs

use serde::{Deserialize, Serialize, Deserializer, Serializer};
use base64::{Engine, engine::general_purpose::STANDARD};

#[derive(Debug, Clone, Default)]
pub struct StdBase64Data(pub Vec<u8>);

impl Serialize for StdBase64Data {
    fn serialize<S: Serializer>(&self, s: S) -> Result<S::Ok, S::Error> {
        s.serialize_str(&STANDARD.encode(&self.0))
    }
}

impl<'de> Deserialize<'de> for StdBase64Data {
    fn deserialize<D: Deserializer<'de>>(d: D) -> Result<Self, D::Error> {
        let s = String::deserialize(d)?;
        let bytes = STANDARD.decode(s).map_err(serde::de::Error::custom)?;
        Ok(StdBase64Data(bytes))
    }
}
```

---

## ğŸ“¦ genx - LLM ç»Ÿä¸€æ¥å£

### åŠŸèƒ½è¦ç‚¹

#### æ ¸å¿ƒ (Go & Rust)
- **Message/Contents**: æ¶ˆæ¯å’Œå†…å®¹ç±»å‹
- **FuncTool**: å‡½æ•°å·¥å…·ï¼ˆJSON Schemaï¼‰
- **Stream**: æµå¼å“åº”å¤„ç†
- **Generator**: LLM ç”Ÿæˆå™¨ trait
- **ModelContext**: æ¨¡å‹ä¸Šä¸‹æ–‡

#### é«˜çº§åŠŸèƒ½ (Go ç‹¬æœ‰)
- **agent/**: Agent æ¡†æ¶
  - ReActAgent: æ¨ç†-è¡ŒåŠ¨å¾ªç¯
  - MatchAgent: æ„å›¾åŒ¹é…è·¯ç”±
  - Tool ç³»ç»Ÿ: BuiltinToolã€GeneratorToolã€HTTPToolã€CompositeTool
- **agentcfg/**: Agent é…ç½®ç³»ç»Ÿ
  - YAML/JSON é…ç½®åŠ è½½
  - $ref å¼•ç”¨ç³»ç»Ÿ
  - çŠ¶æ€åºåˆ—åŒ–
- **match/**: è§„åˆ™åŒ¹é…å¼•æ“
  - æ¨¡å¼å®šä¹‰
  - å˜é‡æå–
- **generators/**: Generator å®ç°é›†åˆ
- **modelcontexts/**: ModelContext å®ç°é›†åˆ
- **playground/**: æµ‹è¯•å’Œè°ƒè¯•å·¥å…·

### æŠ€æœ¯éš¾ç‚¹

#### æ ¸å¿ƒ
1. **JSON Schema ç”Ÿæˆ**: ä»ç±»å‹å®šä¹‰è‡ªåŠ¨ç”Ÿæˆ JSON Schema
2. **æµå¼å¤„ç†**: å¤„ç† SSE æˆ– WebSocket æµ
3. **å¤šæ¨¡æ€**: æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘çš„ç»Ÿä¸€å¤„ç†

#### Agent æ¡†æ¶
1. **çŠ¶æ€ç®¡ç†**: Agent æ‰§è¡Œè¿‡ç¨‹ä¸­çš„çŠ¶æ€ä¿å­˜å’Œæ¢å¤
2. **å·¥å…·ç¼–æ’**: å¤šå·¥å…·ç»„åˆã€é¡ºåºæ‰§è¡Œã€æ¡ä»¶åˆ†æ”¯
3. **åŒ¹é…å¼•æ“**: è§„åˆ™è§£æã€å˜é‡æå–ã€ä¼˜å…ˆçº§å¤„ç†
4. **é…ç½®ç³»ç»Ÿ**: å¼•ç”¨è§£æã€ç±»å‹éªŒè¯ã€çƒ­é‡è½½

### Go vs Rust å·®å¼‚
| åŠŸèƒ½ | Go | Rust | è¯´æ˜ |
|------|:--:|:----:|------|
| Message/Contents | âœ… | âœ… | å®ç°ä¸€è‡´ |
| FuncTool | âœ… | âœ… | å®ç°ä¸€è‡´ |
| Stream | âœ… | âœ… | å®ç°ä¸€è‡´ |
| Generator | âœ… | âœ… | å®ç°ä¸€è‡´ |
| OpenAI é€‚é… | âœ… | âœ… | å®ç°ä¸€è‡´ |
| Gemini é€‚é… | âœ… | âœ… | å®ç°ä¸€è‡´ |
| **agent/** | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| **agentcfg/** | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| **match/** | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| **generators/** | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| **modelcontexts/** | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |
| **playground/** | âœ… | âŒ | Rust å®Œå…¨ç¼ºå¤± |

### Agent æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Router Agent (Match)                    â”‚
â”‚                   Rules: chat, fortune, music                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                     â”‚                         â”‚
â”‚             â–¼                     â–¼                         â–¼
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”‚   Chat Agent    â”‚   â”‚  Fortune Agent  â”‚   â”‚   Music Agent   â”‚
â”‚   â”‚    (ReAct)      â”‚   â”‚    (ReAct)      â”‚   â”‚    (ReAct)      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                  â”‚                     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          â”‚ lunar_cal     â”‚     â”‚ search_song   â”‚
â”‚                          â”‚ calculate     â”‚     â”‚ play_song     â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Rust å¾…å®ç°
```
rust/genx/src/
  â”œâ”€â”€ agent/
  â”‚     â”œâ”€â”€ mod.rs
  â”‚     â”œâ”€â”€ react.rs      # ReAct Agent
  â”‚     â”œâ”€â”€ match_agent.rs # Match Agent
  â”‚     â”œâ”€â”€ state.rs      # çŠ¶æ€ç®¡ç†
  â”‚     â””â”€â”€ tools/
  â”‚           â”œâ”€â”€ mod.rs
  â”‚           â”œâ”€â”€ builtin.rs
  â”‚           â”œâ”€â”€ generator.rs
  â”‚           â”œâ”€â”€ http.rs
  â”‚           â””â”€â”€ composite.rs
  â”œâ”€â”€ agentcfg/
  â”‚     â”œâ”€â”€ mod.rs
  â”‚     â”œâ”€â”€ agent.rs      # Agent é…ç½®
  â”‚     â”œâ”€â”€ tool.rs       # Tool é…ç½®
  â”‚     â”œâ”€â”€ context.rs    # Context é…ç½®
  â”‚     â””â”€â”€ refs.rs       # å¼•ç”¨è§£æ
  â””â”€â”€ match/
        â”œâ”€â”€ mod.rs
        â”œâ”€â”€ rule.rs       # è§„åˆ™å®šä¹‰
        â”œâ”€â”€ pattern.rs    # æ¨¡å¼è§£æ
        â””â”€â”€ matcher.rs    # åŒ¹é…å¼•æ“
```

---

## ğŸ“¦ jsontime - JSON æ—¶é—´ç±»å‹ âš ï¸ Rust ç¼ºå¤±

### åŠŸèƒ½è¦ç‚¹
- **Duration**: æ—¶é—´é—´éš”ï¼Œåºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²æˆ–çº³ç§’æ•°
- **Milli**: æ¯«ç§’æ—¶é—´æˆ³
- **Unix**: Unix æ—¶é—´æˆ³ï¼ˆç§’ï¼‰

### æŠ€æœ¯éš¾ç‚¹
1. **çµæ´»ååºåˆ—åŒ–**: æ”¯æŒå­—ç¬¦ä¸² `"1h30m"` æˆ–æ•°å­— `5400000000000`
2. **ç²¾åº¦å¤„ç†**: æ¯«ç§’/ç§’/çº³ç§’è½¬æ¢

### Rust å¾…å®ç°
```rust
// rust/jsontime/src/lib.rs

use serde::{Deserialize, Deserializer, Serialize, Serializer};
use std::time::Duration as StdDuration;

#[derive(Debug, Clone, Copy, Default)]
pub struct Duration(pub StdDuration);

impl Serialize for Duration {
    fn serialize<S: Serializer>(&self, s: S) -> Result<S::Ok, S::Error> {
        s.serialize_str(&format_duration(self.0))
    }
}

impl<'de> Deserialize<'de> for Duration {
    fn deserialize<D: Deserializer<'de>>(d: D) -> Result<Self, D::Error> {
        // æ”¯æŒå­—ç¬¦ä¸²æˆ–æ•°å­—
        // ...
    }
}

#[derive(Debug, Clone, Copy, Default, Serialize, Deserialize)]
pub struct Milli(pub i64);

#[derive(Debug, Clone, Copy, Default, Serialize, Deserialize)]  
pub struct Unix(pub i64);
```

---

## ğŸ“¦ minimax - MiniMax SDK

### åŠŸèƒ½è¦ç‚¹
- **Text**: æ–‡æœ¬ç”Ÿæˆï¼ˆChatCompletionï¼‰ã€æµå¼è¾“å‡º
- **Speech**: è¯­éŸ³åˆæˆï¼ˆåŒæ­¥ã€å¼‚æ­¥ï¼‰
- **Video**: è§†é¢‘ç”Ÿæˆï¼ˆT2Vã€I2Vã€Agentï¼‰
- **Image**: å›¾ç‰‡ç”Ÿæˆ
- **Music**: éŸ³ä¹ç”Ÿæˆ
- **File**: æ–‡ä»¶ä¸Šä¼ /ç®¡ç†
- **Voice**: éŸ³è‰²åˆ—è¡¨ã€å…‹éš†ã€è®¾è®¡
- **Task**: å¼‚æ­¥ä»»åŠ¡è½®è¯¢

### æŠ€æœ¯éš¾ç‚¹
1. **æµå¼è§£æ**: SSE æ ¼å¼è§£æ
2. **å¼‚æ­¥ä»»åŠ¡**: è½®è¯¢æœºåˆ¶ã€è¶…æ—¶å¤„ç†
3. **æ–‡ä»¶ä¸Šä¼ **: multipart/form-data
4. **é”™è¯¯å¤„ç†**: API é”™è¯¯ç æ˜ å°„

### Go vs Rust å·®å¼‚
âœ… **å®ç°åŸºæœ¬ä¸€è‡´**

---

## ğŸ“¦ mqtt0 - è½»é‡çº§ MQTT

### åŠŸèƒ½è¦ç‚¹
- **Client**: QoS 0 MQTT å®¢æˆ·ç«¯
- **Broker**: QoS 0 MQTT æœåŠ¡ç«¯
- **Authenticator**: è®¤è¯æ¥å£
- **ACL**: å‘å¸ƒ/è®¢é˜…æƒé™æ§åˆ¶
- **Transport**: TCPã€TLSã€WebSocketã€WSS

### æŠ€æœ¯éš¾ç‚¹
1. **åè®®è§£æ**: MQTT 3.1.1 / 5.0 æŠ¥æ–‡è§£æ
2. **Topic åŒ¹é…**: é€šé…ç¬¦ `+` å’Œ `#` çš„å¤„ç†
3. **è¿æ¥ç®¡ç†**: å®¢æˆ·ç«¯æ–­å¼€ã€é‡è¿ã€å¿ƒè·³
4. **TLS æ”¯æŒ**: è¯ä¹¦åŠ è½½ã€éªŒè¯

### Go vs Rust å·®å¼‚
âœ… **å®ç°åŸºæœ¬ä¸€è‡´**

Rust çš„ trie å®ç°å†…åµŒåœ¨ mqtt0 ä¸­ï¼ŒGo çš„ trie æ˜¯ç‹¬ç«‹åŒ…ã€‚

---

## ğŸ“¦ speech - è¯­éŸ³æŠ½è±¡å±‚ âš ï¸ Rust ç¼ºå¤±

### åŠŸèƒ½è¦ç‚¹
- **Speech**: è¯­éŸ³æµæ¥å£ï¼ˆéŸ³é¢‘ + æ–‡æœ¬è½¬å†™ï¼‰
- **SpeechSegment**: å•ä¸ªè¯­éŸ³ç‰‡æ®µ
- **Voice**: çº¯éŸ³é¢‘æµæ¥å£
- **VoiceSegment**: å•ä¸ªéŸ³é¢‘ç‰‡æ®µ
- **TTS/ASR**: æŠ½è±¡æ¥å£

### æŠ€æœ¯éš¾ç‚¹
1. **æŠ½è±¡è®¾è®¡**: ç»Ÿä¸€ä¸åŒ TTS/ASR æä¾›å•†çš„æ¥å£
2. **æµå¼å¤„ç†**: è¾¹ç”Ÿæˆè¾¹æ’­æ”¾
3. **èµ„æºç®¡ç†**: æ­£ç¡®å…³é—­æµå’Œé‡Šæ”¾èµ„æº

### æ¥å£è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Speech                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Segment 1 â”‚â”€â”€â–¶â”‚ Segment 2 â”‚â”€â”€â–¶â”‚ Segment 3 â”‚  â”‚
â”‚  â”‚ Audio +   â”‚   â”‚ Audio +   â”‚   â”‚ Audio +   â”‚  â”‚
â”‚  â”‚ Text      â”‚   â”‚ Text      â”‚   â”‚ Text      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Voice                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Segment 1 â”‚â”€â”€â–¶â”‚ Segment 2 â”‚â”€â”€â–¶â”‚ Segment 3 â”‚  â”‚
â”‚  â”‚ Audio     â”‚   â”‚ Audio     â”‚   â”‚ Audio     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Rust å¾…å®ç°
```rust
// rust/speech/src/lib.rs

use giztoy_audio::pcm::Format;
use std::io::Read;

pub trait Speech {
    type Segment: SpeechSegment;
    
    fn next(&mut self) -> Result<Option<Self::Segment>, Error>;
    fn close(&mut self) -> Result<(), Error>;
}

pub trait SpeechSegment {
    fn decode(&self, format: Format) -> VoiceSegment;
    fn transcribe(&self) -> Box<dyn Read>;
    fn close(&mut self) -> Result<(), Error>;
}

pub trait Voice {
    type Segment: VoiceSegment;
    
    fn next(&mut self) -> Result<Option<Self::Segment>, Error>;
    fn close(&mut self) -> Result<(), Error>;
}

pub trait VoiceSegment {
    fn format(&self) -> Format;
    fn samples(&self) -> &[i16];
}
```

---

## ğŸ“¦ trie - æ³›å‹ Trie æ•°æ®ç»“æ„

### åŠŸèƒ½è¦ç‚¹
- **è·¯å¾„å­˜å‚¨**: åŸºäº `/` åˆ†éš”çš„è·¯å¾„
- **é€šé…ç¬¦åŒ¹é…**: `+`ï¼ˆå•çº§ï¼‰å’Œ `#`ï¼ˆå¤šçº§ï¼‰
- **æ³›å‹å€¼**: æ”¯æŒä»»æ„ç±»å‹ `T`
- **éå†**: Walk æ–¹æ³•éå†æ‰€æœ‰èŠ‚ç‚¹

### æŠ€æœ¯éš¾ç‚¹
1. **åŒ¹é…ä¼˜å…ˆçº§**: ç²¾ç¡®åŒ¹é… > å•çº§é€šé…ç¬¦ > å¤šçº§é€šé…ç¬¦
2. **è·¯å¾„è§£æ**: å¤„ç†ç©ºæ®µã€å°¾éƒ¨æ–œæ 
3. **æ³›å‹è®¾è®¡**: æ”¯æŒä»»æ„å…ƒç´ ç±»å‹

### Go vs Rust å·®å¼‚
| åŠŸèƒ½ | Go | Rust | è¯´æ˜ |
|------|:--:|:----:|------|
| ç‹¬ç«‹åŒ… | âœ… | âŒ | Rust å†…åµŒåœ¨ mqtt0 |
| æ³›å‹æ”¯æŒ | âœ… | âœ… | éƒ½æ”¯æŒæ³›å‹ |

### Rust å¾…å®ç°ï¼ˆç‹¬ç«‹åŒ…ï¼‰
```
rust/trie/
  â”œâ”€â”€ Cargo.toml
  â””â”€â”€ src/
        â””â”€â”€ lib.rs    # ä» mqtt0/src/trie.rs æå–
```

---

## ğŸ¯ ä¼˜å…ˆçº§å»ºè®®

### P0 - æ ¸å¿ƒåŠŸèƒ½
1. **genx/agent/** - Agent æ¡†æ¶æ˜¯æ™ºèƒ½åº”ç”¨çš„æ ¸å¿ƒ
2. **chatgear/** - è®¾å¤‡é€šä¿¡æ˜¯ IoT åœºæ™¯å¿…éœ€

### P1 - é‡è¦åŠŸèƒ½
3. **speech/** - è¯­éŸ³æŠ½è±¡å±‚æä¾›ç»Ÿä¸€æ¥å£
4. **genx/match/** - è§„åˆ™åŒ¹é…æ”¯æŒæ„å›¾è¯†åˆ«
5. **cli/** è¡¥å…¨ - TUIã€æ—¥å¿—ç­‰ç”¨æˆ·ä½“éªŒåŠŸèƒ½

### P2 - å·¥å…·ç±»
6. **jsontime/** - JSON åºåˆ—åŒ–ä¾¿æ·ç±»å‹
7. **encoding/** - ç¼–ç å·¥å…·ç±»å‹
8. **trie/** - ç‹¬ç«‹åŒ…ï¼Œä¾¿äºå¤ç”¨
9. **audio/portaudio** - å®æ—¶éŸ³é¢‘é‡‡é›†

---

## ğŸ“ æ€»ç»“

Rust å®ç°å·²ç»è¦†ç›–äº†å¤§éƒ¨åˆ† API å®¢æˆ·ç«¯ï¼ˆminimaxã€dashscopeã€doubaospeechï¼‰å’ŒåŸºç¡€è®¾æ–½ï¼ˆbufferã€audio codecï¼‰ã€‚ä¸»è¦å·®è·åœ¨äºï¼š

1. **Agent æ¡†æ¶**: è¿™æ˜¯æœ€å¤§çš„å·®è·ï¼ŒGo ç‰ˆæœ¬æœ‰å®Œæ•´çš„ Agent ç³»ç»Ÿæ”¯æŒ ReAct å’Œ Match æ¨¡å¼
2. **è®¾å¤‡é€šä¿¡**: chatgear åŒ…æ”¯æŒ IoT è®¾å¤‡çŠ¶æ€ç®¡ç†
3. **é«˜å±‚æŠ½è±¡**: speech åŒ…æä¾›è¯­éŸ³å¤„ç†çš„ç»Ÿä¸€æ¥å£
4. **å·¥å…·ç±»**: jsontimeã€encoding ç­‰ä¾¿æ·ç±»å‹

å»ºè®®æŒ‰ä¼˜å…ˆçº§é€æ­¥è¡¥å…¨ Rust å®ç°ï¼Œä¼˜å…ˆå®Œæˆ Agent æ¡†æ¶ä»¥æ”¯æŒæ™ºèƒ½åº”ç”¨å¼€å‘ã€‚
