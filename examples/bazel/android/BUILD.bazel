"""Android example application using rules_android."""

load("@rules_android//android:rules.bzl", "android_binary", "android_library")
load("@rules_kotlin//kotlin:android.bzl", "kt_android_library")

# Android library containing the app source code
android_library(
    name = "lib",
    srcs = glob(["java/**/*.java"]),
    custom_package = "com.example.helloworld",
    manifest = "AndroidManifest.xml",
    resource_files = glob(["res/**"]),
    visibility = ["//visibility:private"],
)

# Android application (APK)
android_binary(
    name = "app",
    custom_package = "com.example.helloworld",
    manifest = "AndroidManifest.xml",
    visibility = ["//visibility:public"],
    deps = [":lib"],
)

# ============================================================================
# Alternative: Kotlin-based app
# ============================================================================

kt_android_library(
    name = "kotlin_lib",
    srcs = glob(["kotlin/**/*.kt"]),
    custom_package = "com.example.helloworld.kotlin",
    manifest = "kotlin/AndroidManifest.xml",
    resource_files = glob(["kotlin/res/**"]),
    visibility = ["//visibility:private"],
)

android_binary(
    name = "kotlin_app",
    custom_package = "com.example.helloworld.kotlin",
    manifest = "kotlin/AndroidManifest.xml",
    visibility = ["//visibility:public"],
    deps = [":kotlin_lib"],
)
